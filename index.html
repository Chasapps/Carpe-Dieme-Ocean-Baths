<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carpe Diem Passport — Splash</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="splash-body" id="splashBody">
  <!--
    Splash screen
    -------------
    • Shows your gold-foil crest and the owner name saved on THIS device
    • A single tap moves into the Harbour Pools overview map.
  -->
  <div class="splash-overlay">
    <h1 id="ownerName" class="foil-emboss owner-name">Loading…</h1>
  </div>

<script>
(async () => {
  const ownerEl = document.getElementById('ownerName');
  const LS_KEY = 'passportOwnerName';

  let name = null;

  // 1. Try loading from owner.txt
  try {
    const res = await fetch('owner.txt', { cache: 'no-store' });
    if (res.ok) {
      name = (await res.text()).trim();
    }
  } catch (e) {
    console.warn('Could not load owner.txt');
  }

  // 2. If file missing, fallback to saved localStorage
  if (!name) {
    try {
      name = localStorage.getItem(LS_KEY);
    } catch {}
  }

  // 3. Final fallback
  if (!name) {
    name = 'Ocean Pool Passport';
  }

  // Save it for other pages
  try {
    localStorage.setItem(LS_KEY, name);
  } catch {}

  if (ownerEl) ownerEl.textContent = name;

  // Tap to enter
  document.body.addEventListener('click', () => {
    try {
      sessionStorage.setItem('enteredViaSplash', '1');
    } catch {}
    location.href = 'overview.html';
  });
})();
</script>

</body>
</html>
