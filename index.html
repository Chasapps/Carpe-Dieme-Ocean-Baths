<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carpe Diem Passport — Splash</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="splash-body" id="splashBody">
  <!--
    Splash screen
    -------------
    • Shows your gold-foil crest and the owner name saved on THIS device
    • A single tap moves into the Harbour Pools overview map.
  -->
  <div class="splash-overlay">
    <h1 id="ownerName" class="foil-emboss owner-name">Loading…</h1>
  </div>

  <script>
// Small inline script so the splash works even if JS modules fail.
(() => {
  const ownerEl = document.getElementById('ownerName');
  const bodyEl  = document.getElementById('splashBody');

  const LS_KEY = 'passportOwnerName';
  let name = null;

  // 1. Try to load a previously saved name from this device.
  try {
    name = localStorage.getItem(LS_KEY);
  } catch (e) {
    // If localStorage is blocked, we just behave as if there's no saved name.
    name = null;
  }

  // 2. If no name saved yet, ask the user once.
  if (!name) {
    const defaultName = 'Carpe Diem Passport';
    const input = prompt('What name should appear on your passport?', defaultName);
    name = (input && input.trim()) || defaultName;

    // Best-effort save for next time.
    try {
      localStorage.setItem(LS_KEY, name);
    } catch (e) {
      // Ignore errors (e.g. storage disabled)
    }
  }

  // 3. Show the chosen name on the passport cover.
  if (ownerEl) {
    ownerEl.textContent = name;
  }

  // 4. Any tap on the cover takes you into the overview map.
  if (bodyEl) {
    bodyEl.addEventListener('click', () => {
      try {
        // Gate flag so users can’t deep-link into the app without the splash.
        sessionStorage.setItem('enteredViaSplash', '1');
      } catch (e) {}
      location.href = 'overview.html';
    });
  }
})();
</script>
</body>
</html>
